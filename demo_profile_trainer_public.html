<div class="row" style="padding-bottom: 10px;">
    <div class="col-sm-12">
<p>This is all the information the users will see on the site.</p>
    </div>
</div>

<div class="row">
<div class="col-sm-12">
<div class="form-horizontal" id="trainer_update">
					<div class="panel-body">
						<div class="form-group">
							<label for="inputAbout" class="col-sm-2 control-label">About You</label>
							<div class="col-sm-10">
                                <textarea id="about" class="form-control" rows="3" placeholder=""></textarea>
                                								<p class="help-block">This will go in the 'About Me' section on your profile, keep it short and snappy.</p>
							</div>
						</div> <!-- / .form-group -->
						<div class="form-group">
							<label for="inputBio" class="col-sm-2 control-label">Biography</label>
							<div class="col-sm-10">
                                <textarea id="bio" class="form-control" rows="5" placeholder=""></textarea>
								<p class="help-block">This will go in the bio section on your profile, feel free to be more detailed.</p>
							</div>
						</div> <!-- / .form-group -->
						<div class="form-group">
							<label for="asdasdas" class="col-sm-2 control-label">Text</label>
							<div class="col-sm-10">
								<textarea id="text" class="form-control"></textarea>
								<p class="help-block">Example block-level help text here.</p>
							</div>
						</div> <!-- / .form-group -->
						<div class="form-group">
							<label class="col-sm-2 control-label">Specialties</label>
							 <div class="col-sm-5">
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="1" id="sp1" class="px specialties-checkbox">
                                                                   <span class="lbl">Brides to Be</span>
                                                               </label>
                                                           </div>
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="2" id="sp2" class="px specialties-checkbox">
                                                                   <span class="lbl">Busy Professionals</span>
                                                               </label>
                                                           </div>
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="3" id="sp3" class="px specialties-checkbox">
                                                                   <span class="lbl">Elite Athletes</span>
                                                               </label>
                                                           </div>
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="4" id="sp4" class="px specialties-checkbox">
                                                                   <span class="lbl">Exercise Novices</span>
                                                               </label>
                                                           </div>
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="5" id="sp5" class="px specialties-checkbox">
                                                                   <span class="lbl">Grooms to Be</span>
                                                               </label>
                                                           </div>
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="6" id="sp6" class="px specialties-checkbox">
                                                                   <span class="lbl">Men</span>
                                                               </label>
                                                           </div>
                                                       </div>
                                                   <div class="col-sm-5">
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="12" id="sp12" class="px specialties-checkbox">
                                                                   <span class="lbl">Out of Shape</span>
                                                               </label>
                                                           </div>
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="11" id="sp11" class="px specialties-checkbox">
                                                                   <span class="lbl">Looking to Lose Weight</span>
                                                               </label>
                                                           </div>
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="10" id="sp10" class="px specialties-checkbox">
                                                                   <span class="lbl">Postnatal</span>
                                                               </label>
                                                           </div>
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="9" id="sp9" class="px specialties-checkbox">
                                                                   <span class="lbl">Prenatal</span>
                                                               </label>
                                                           </div>
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="8" id="sp8" class="px specialties-checkbox">
                                                                   <span class="lbl">Seniors</span>
                                                               </label>
                                                           </div>
                                                           <div class="checkbox" style="margin: 2;">
                                                               <label>
                                                                   <input type="checkbox" value="7" id="sp7" class="px specialties-checkbox">
                                                                   <span class="lbl">Women</span>
                                                               </label>
                                                           </div>
                                                       </div>
						</div> <!-- / .form-group -->

                        						<div class="form-group">
							<label class="col-sm-2 control-label">Conditions</label>
							 <div class="col-sm-5">
       <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="" class="px conditions-checkbox">
                <span class="lbl">Back Pain</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="" class="px conditions-checkbox">
                <span class="lbl">Chronic / Acute Pain</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="" class="px conditions-checkbox">
                <span class="lbl">Injury Prevention</span>
            </label>
        </div>
    </div>
<div class="col-sm-5">
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="" class="px conditions-checkbox">
                <span class="lbl">Muscle Rehab</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="" class="px conditions-checkbox">
                <span class="lbl">Sports Rehab</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="" class="px conditions-checkbox">
                <span class="lbl">Wellness / Preventative Training</span>
            </label>
        </div>
    </div>
						</div> <!-- / .form-group -->
<div class="form-group">
							<label class="col-sm-2 control-label">Certifications</label>
							 <div class="col-sm-5">
       <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="1" id="crt1" class="px certifications-checkbox">
                <span class="lbl">NASM (National Academy of Sports Medicine)</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="2" id="crt2" class="px certifications-checkbox">
                <span class="lbl">ACE (American Council on Exercise)</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="3" id="crt3" class="px certifications-checkbox">
                <span class="lbl">Yoga Certification Body* TBD</span>
            </label>
        </div>
    </div>
<div class="col-sm-5">
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="4" id="crt4" class="px certifications-checkbox">
                <span class="lbl">BS Kinesiology</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="5" id="crt5" class="px certifications-checkbox">
                <span class="lbl">BS Sports Medicine</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="6" id="crt6" class="px certifications-checkbox">
                <span class="lbl">MA</span>
            </label>
        </div>
    </div>
						</div> <!-- / .form-group -->
                        
<div class="form-group">
							<label class="col-sm-2 control-label">Additional Cert.</label>
							 <div class="col-sm-5">
       <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="1" id="sk1" class="px skills-checkbox">
                <span class="lbl">Personal Training</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="2" id="sk2" class="px skills-checkbox">
                <span class="lbl">Yoga</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="3" id="sk3" class="px skills-checkbox">
                <span class="lbl">Pilates</span>
            </label>
        </div>
    </div>
<div class="col-sm-5">
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="4" id="sk4" class="px skills-checkbox">
                <span class="lbl">Physical Therapy or Rehab</span>
            </label>
        </div>
        <div class="checkbox" style="margin: 2;">
            <label>
                <input type="checkbox" value="5" id="sk5" class="px skills-checkbox">
                <span class="lbl">Aerobics</span>
            </label>
        </div>
    </div>
						</div> <!-- / .form-group -->
<hr />
						<div class="form-group" style="margin-bottom: 0;">
							<div class="col-sm-offset-2 col-sm-10">
								<button type="submit" id="update_teacher" class="btn">Update</button>
							</div>
						</div> <!-- / .form-group -->
					</div>
				</div>

    
</div>
</div>

<?php include 'fw_footer.html'; ?>
<?php include 'fw_close.html'; ?>

<script>
  var teacher=JSON.parse(sessionStorage.teacher);;

  fill_in_trainer = function() {
    console.log("teacher is: "+JSON.stringify(teacher));
    $( "#about" ).html(teacher.about==null ? "" : teacher.about);
    $( "#bio" ).html(teacher.bio==null ? "" : teacher.bio);
    $( "#text" ).html(teacher.text==null ? "" : teacher.text);
    $.each(teacher.specialties,
	   function( index, value ) {
	     console.log("specialties "+index+"- id: "+value.id+", name: "+value.name+", dom id: #sp"+value.id);
	     $( "#sp"+value.id ).prop('checked', true);
	   });
    $.each(teacher.certifications,
	   function( index, value ) {
	     console.log("cert "+index+"- id: "+value.id+", name: "+value.name+", dom id: #crt"+value.id);
	     $( "#crt"+value.id ).prop('checked', true);
	   });
    $.each(teacher.skills,
	   function( index, value ) {
	     console.log("skill "+index+"- id: "+value.id+", name: "+value.name+", dom id: #sk"+value.id);
	     $( "#sk"+value.id ).prop('checked', true);
	   });
  }

  update_trainer = function() {
    console.log("#about: "+$( "#about" ).val());
    var teacherJSON={"name": $("#about").val(), "bio": $("#bio").val(), "text": $("#text").val()};
    console.log("type teacherJSON: "+typeof(teacherJSON));
    if($( ".specialties-checkbox:checked" ).length > 0) {
      teacherJSON.specialties=[];
      $.each($( ".specialties-checkbox:checked" ),
	     function( index, value ) {
	       console.log("specialties index: "+index+", value: "+value.value);
	       teacherJSON.specialties[index]={"id": value.value};
	     });
    }
    if($( ".certifications-checkbox:checked" ).length > 0) {
      teacherJSON.certifications=[];
      $.each($( ".certifications-checkbox:checked" ),
	     function( index, value ) {
	       console.log("certs index: "+index+", value: "+value);
	       teacherJSON.certifications[index]={"id": value.value};
	     });
    }
    if($( ".skills-checkbox:checked" ).length > 0) {
      teacherJSON.skills=[];
      $.each($( ".skills-checkbox:checked" ),
	     function( index, value ) {
	       console.log("skill index: "+index+", value: "+value);
	       teacherJSON.skills[index]={"id": value.value};
	     });
    }
    console.log("teacherJSON: "+JSON.stringify(teacherJSON));
    teacher_url = "http://199.195.192.136:3000/api/teachers/"+teacher.id+"?token="+sessionStorage.token+"&email="+sessionStorage.email; 
    console.log("teacher_url: "+teacher_url);
    $.ajax({type: "POST",
            url: teacher_url,
	    data: JSON.stringify(teacherJSON),
	    contentType: "application/json",
	    dataType: 'json',
	    async: true,
	    success: note_teacher_saved,
	    error: function(data) {console.log("teacher fail: "+JSON.stringify(data));}
	   });
 
  }

  note_teacher_saved = function(data) {
    sessionStorage.teacher = JSON.stringify(data);
    //We should fill this in to put some sort of "teacher saved" message somewhere
    console.log("teacher has been saved: "+JSON.stringify(data));
  }

  $( "#update_teacher" ).click(update_trainer);

  fill_in_trainer();

</script>

